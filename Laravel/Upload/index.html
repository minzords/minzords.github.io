<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://minzord.fr/Laravel/Upload/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Upload de Fichier sur Laravel - Minzord</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">Minzord</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Système <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../UNIX/">Linux / BSD</a>
</li>

                        
                            
<li >
    <a href="../../Windows/">Windows</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Réseau <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Cisco/">Cisco</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Développement <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">PHP</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../">Laravel</a>
</li>

        
            
<li >
    <a href="../../Symfony/">Symfony</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../CSharp/">C#</a>
</li>

                        
                            
<li >
    <a href="../../Javascript/">Javascript</a>
</li>

                        
                            
<li >
    <a href="../../GIT/">Git</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DevOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../Kubernetes/">Kubernetes</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://github.com/minzords/minzords.github.io/edit/master/docs/Laravel/Upload.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#introduction">Introduction</a></li>
        <li class="first-level "><a href="#la-methode-qui-va-router-vers-le-formulaire">La méthode qui va router vers le formulaire</a></li>
        <li class="first-level "><a href="#le-formulaire-html-blade">Le formulaire HTML (Blade)</a></li>
        <li class="first-level "><a href="#traitement-du-formulaire">Traitement du formulaire</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>Dans cet exemple, nous allons créer un formulaire qui va créer un nouveau produit qui contient un nom, une categorie et on va lui definir une image. Cette image sera stockée dans notre projet laravel <strong>(storage/app/public)</strong>. </p>
<h1 id="la-methode-qui-va-router-vers-le-formulaire">La méthode qui va router vers le formulaire<a class="headerlink" href="#la-methode-qui-va-router-vers-le-formulaire" title="Permanent link">&para;</a></h1>
<pre><code class="language-php">    public function create(): View
  {
        $categories = Categorie::all();
        return view('admin.produit.create', compact('categories'));
  }
</code></pre>
<p>Cette méthode va simplement récupérer toutes les catégories disponibles et renvoyer la vue admin.produit.create <strong>(resources/views/admin/produit/create.blade.php)</strong> avec la variable c qui contient les catégories.</p>
<h1 id="le-formulaire-html-blade">Le formulaire HTML (Blade)<a class="headerlink" href="#le-formulaire-html-blade" title="Permanent link">&para;</a></h1>
<pre><code class="language-html">    &lt;div class=&quot;py-12 max-w-7xl mx-auto sm:px-6 lg:px-8&quot;&gt;
        &lt;div class=&quot;overflow-x-auto bg-white dark:bg-gray-800 sm:px-12 sm:rounded-lg p-6&quot;&gt;
            &lt;!-- formulaire de création d'un produit --&gt;
            &lt;form action=&quot;{{ route('product.store') }}&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
                @csrf
                &lt;div class=&quot;flex justify-center items-center flex-col&quot;&gt;
                    &lt;div class=&quot;relative mb-6&quot; data-te-input-wrapper-init&gt;
                        &lt;label for=&quot;nom&quot; class=&quot;block dark:text-white&quot;&gt;Titre:&lt;/label&gt;
                        &lt;input
                            type=&quot;text&quot; 
                            class=&quot;rounded dark:bg-gray-700 dark:text-white h-auto px-auto w-full &quot;
                            name=&quot;nom&quot;
                            id=&quot;nom&quot;
                            placeholder=&quot;Titre&quot;
                        /&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;relative mb-6&quot;&gt;
                        &lt;label for=&quot;category&quot; class=&quot;block dark:text-white&quot;&gt;Catégorie:&lt;/label&gt;
                        &lt;select
                            class=&quot;form-select rounded dark:bg-gray-700 dark:text-white&quot;
                            name=&quot;category&quot;
                            id=&quot;category&quot;
                        &gt;
                            @foreach ($categories as $categorie)
                                &lt;option value=&quot;{{ $categorie-&gt;id     }}&quot;&gt;{{ $categorie-&gt;nom }}&lt;/option&gt;
                            @endforeach
                        &lt;/select&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;relative mb-6&quot;&gt;
                        &lt;label for=&quot;image&quot; class=&quot;block dark:text-white&quot;&gt;Image:&lt;/label&gt;
                        &lt;input  
                            type=&quot;file&quot;
                            class=&quot;rounded dark:bg-gray-700 dark:text-white h-auto px-auto w-full&quot;
                            name=&quot;image&quot;
                            id=&quot;image&quot;
                            accept=&quot;image/svg+xml, image/jpeg, image/png, image/gif&quot;
                        /&gt;
                    &lt;/div&gt;
                    &lt;button type=&quot;submit&quot; class=&quot;px-4 py-2 bg-blue-500 text-white rounded-md&quot;&gt;Créer&lt;/button&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;  
    &lt;/div&gt;
</code></pre>
<h1 id="traitement-du-formulaire">Traitement du formulaire<a class="headerlink" href="#traitement-du-formulaire" title="Permanent link">&para;</a></h1>
<pre><code class="language-php">    public function store(Request $request): RedirectResponse
  {

        // Validation du formulaire
        $validatedData = $request-&gt;validate([
            'nom' =&gt; 'required',
            'category' =&gt; 'required',
            'image' =&gt; 'required|image|mimes:jpeg,png,jpg,gif,svg'
        ]);

        // Upload de l'image    
        $name = Storage::put('public/produits', $request-&gt;file('image'));
        $name = str_replace('public/', 'storage/', $name);

        $produits = Produits::create([
            'nom' =&gt; request('nom'),
            'category_id' =&gt; (request('category')),
            'photo' =&gt; $name,
        ]);

        return redirect()-&gt;route('product.list')-&gt;with('Succès', 'Le produit a bien été créée');
  }
</code></pre>
<p>Cette méthode va donc valider les saisies du formulaire, téléversée l'image dans <strong>(storage/app/public)</strong>. Et enfin crée le produit dans la base de donnée avec l'emplacement de l'image.</p></div>
        
        
    </div>

    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/yaml.min.js"></script>
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/php.min.js"></script>
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/bash.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
